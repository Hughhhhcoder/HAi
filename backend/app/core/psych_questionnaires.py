"""
专业心理测评量表库 - 完整版
所有量表均为国际标准完整版本，不使用简化版
"""

# ==================== 情绪与心境类 ====================

# PHQ-9: Patient Health Questionnaire-9 (抑郁自评量表) - 完整版
PHQ9_QUESTIONS = [
    "在过去的两周里，您感到心情郁闷、沮丧或绝望吗？",
    "在过去的两周里，您对做事失去兴趣或乐趣了吗？",
    "在过去的两周里，您入睡困难、睡不安稳或睡得过多吗？",
    "在过去的两周里，您感到疲倦或没有活力吗？",
    "在过去的两周里，您食欲不振或吃得过多吗？",
    "在过去的两周里，您觉得自己很糟糕，觉得自己让家人失望，或觉得自己是个失败者吗？",
    "在过去的两周里，您对事物专注有困难吗（例如阅读报纸或看电视时）？",
    "在过去的两周里，您动作或说话变慢，或变得比平时更烦躁或坐立不安吗？",
    "在过去的两周里，您有想过死，或用某种方式伤害自己吗？"
]

# GAD-7: Generalized Anxiety Disorder-7 (广泛性焦虑量表) - 完整版
GAD7_QUESTIONS = [
    "在过去的两周里，您感到紧张、焦虑或急躁吗？",
    "在过去的两周里，您无法停止或控制担忧吗？",
    "在过去的两周里，您对各种事情过度担忧吗？",
    "在过去的两周里，您很难放松下来吗？",
    "在过去的两周里，您感到坐立不安，难以静坐吗？",
    "在过去的两周里，您容易变得烦躁或容易生气吗？",
    "在过去的两周里，您感到害怕，好像有什么可怕的事情会发生吗？"
]

# PSS-14: Perceived Stress Scale-14 (压力知觉量表) - 完整版14题
PSS14_QUESTIONS = [
    "在过去的一个月里，您有多频繁地感到意外发生的事情让您心烦？",
    "在过去的一个月里，您有多频繁地感到无法控制生活中重要的事情？",
    "在过去的一个月里，您有多频繁地感到紧张和压力？",
    "在过去的一个月里，您有多频繁地成功应对了生活中的烦恼？",  # 反向题
    "在过去的一个月里，您有多频繁地感到自己能有效地处理生活中发生的重要变化？",  # 反向题
    "在过去的一个月里，您有多频繁地对自己处理个人问题的能力感到有信心？",  # 反向题
    "在过去的一个月里，您有多频繁地感到事情正朝着您希望的方向发展？",  # 反向题
    "在过去的一个月里，您有多频繁地发现自己无法应付所有需要做的事情？",
    "在过去的一个月里，您有多频繁地能够控制生活中的烦恼？",  # 反向题
    "在过去的一个月里，您有多频繁地感到无法掌控一切？",
    "在过去的一个月里，您有多频繁地因为一些意想不到的事情而感到生气？",
    "在过去的一个月里，您有多频繁地发现自己在想一些必须完成的事情？",
    "在过去的一个月里，您有多频繁地能够控制自己如何利用时间？",  # 反向题
    "在过去的一个月里，您有多频繁地感到困难堆积如山，无法克服？"
]

# PANAS: Positive and Negative Affect Schedule (积极消极情绪量表) - 完整版20题
PANAS_QUESTIONS = [
    "在过去一周里，您感到有兴趣的程度如何？",  # P
    "在过去一周里，您感到痛苦的程度如何？",  # N
    "在过去一周里，您感到兴奋的程度如何？",  # P
    "在过去一周里，您感到心烦的程度如何？",  # N
    "在过去一周里，您感到坚强的程度如何？",  # P
    "在过去一周里，您感到内疚的程度如何？",  # N
    "在过去一周里，您感到害怕的程度如何？",  # N
    "在过去一周里，您感到热情的程度如何？",  # P
    "在过去一周里，您感到骄傲的程度如何？",  # P
    "在过去一周里，您感到易怒的程度如何？",  # N
    "在过去一周里，您感到警觉的程度如何？",  # P
    "在过去一周里，您感到羞愧的程度如何？",  # N
    "在过去一周里，您感到受鼓舞的程度如何？",  # P
    "在过去一周里，您感到紧张的程度如何？",  # N
    "在过去一周里，您感到果断的程度如何？",  # P
    "在过去一周里，您感到注意力不集中的程度如何？",  # N
    "在过去一周里，您感到活跃的程度如何？",  # P
    "在过去一周里，您感到害怕的程度如何？",  # N
    "在过去一周里，您感到专注的程度如何？",  # P
    "在过去一周里，您感到敌对的程度如何？"  # N
]

# ==================== 人际关系类 ====================

# ECR-36: Experiences in Close Relationships-36 (亲密关系体验量表) - 完整版36题
ECR36_QUESTIONS = [
    # 焦虑维度 (18题)
    "我担心我会失去伴侣的爱。",
    "我经常担心伴侣不想和我在一起。",
    "我担心伴侣不会像我在乎TA那样在乎我。",
    "我经常担心伴侣并不是真的爱我。",
    "我担心伴侣会离开我。",
    "我经常希望伴侣的感情能和我的一样强烈。",
    "当我不确定伴侣是否在乎我时，我会感到沮丧。",
    "我很少担心伴侣会离开我。",  # 反向
    "我发现伴侣不想和我像我想的那样亲密。",
    "有时候我觉得我逼迫伴侣表现出更多的感情和承诺。",
    "我需要从伴侣那里得到很多保证，让我知道TA爱我。",
    "当伴侣不在身边时，我会担心TA对其他人感兴趣。",
    "当我表达我的感受时，我担心伴侣不会有同样的感受。",
    "我很少担心伴侣对我的感觉。",  # 反向
    "我的渴望吓跑人们。",
    "我经常想要和伴侣完全融合，这有时会吓跑他们。",
    "我担心独自一人。",
    "我对伴侣感到很舒服。",  # 反向
    # 回避维度 (18题)
    "我更愿意不向伴侣展示我内心深处的感受。",
    "我觉得向伴侣倾诉是很容易的。",  # 反向
    "当我与伴侣亲近时感到很自在。",  # 反向
    "我不太愿意与伴侣分享我的内心感受。",
    "我发现很难允许自己依赖伴侣。",
    "当需要依靠伴侣时，我感到很自在。",  # 反向
    "我不介意向伴侣寻求安慰或建议。",  # 反向
    "我发现很难完全信任我的伴侣。",
    "我向伴侣倾诉几乎所有的事情。",  # 反向
    "我和伴侣讨论我的问题和担忧。",  # 反向
    "我觉得依赖他人是很容易的。",  # 反向
    "我不觉得依赖伴侣很舒服。",
    "我通常会向伴侣讨论我的问题和担忧。",  # 反向
    "当伴侣对我太亲近时，我会感到不舒服。",
    "我向伴侣寻求很多事情的帮助。",  # 反向
    "当伴侣依赖我时，我感到不舒服。",
    "当伴侣想要和我非常亲近时，我会感到紧张。",
    "我发现相对容易与伴侣亲近。"  # 反向
]

# IRI-28: Interpersonal Reactivity Index-28 (人际反应指数) - 完整版28题
IRI28_QUESTIONS = [
    # 观点采择 (Perspective Taking) - 7题
    "在批评某人之前，我试图想象如果我处在他们的位置会是什么感觉。",
    "如果我确信我是对的，我不会浪费太多时间去听别人的意见。",  # 反向
    "我有时会试图通过想象事情从朋友的角度看起来是什么样子来更好地理解他们。",
    "我相信每个问题都有两面性，我试图看到两面。",
    "当我对某人生气时，我通常会试着从TA的角度看一会儿。",
    "在做决定之前，我试图考虑每一方的观点。",
    "当我看到有人被利用时，我会感到有点保护他们。",
    # 幻想 (Fantasy) - 7题
    "当我读一本有趣的故事或小说时，我会想象如果故事中的事情发生在我身上会是什么感觉。",
    "看完电影或戏剧后，我感觉好像我是其中的一个角色。",
    "当我看电影时，我可以很容易地把自己放在主角的位置上。",
    "我真的很投入到我读的书或看的电影中。",
    "当我看一部好电影时，我可以很容易地把自己放在主角的位置。",
    "我很少在阅读时深入到虚构角色的感受中。",  # 反向
    "在读书或看电影后，我仍然会被它影响一段时间。",
    # 共情关注 (Empathic Concern) - 7题
    "我经常对不如我幸运的人有温柔、关心的感觉。",
    "有时候我不太为遇到麻烦的其他人感到难过。",  # 反向
    "当我看到有人被利用时，我会感到想要保护TA。",
    "其他人的不幸通常不会让我太困扰。",  # 反向
    "当我看到有人受到不公平对待时会让我难过。",
    "我经常被我看到的事情深深打动。",
    "我会把自己描述为一个心软的人。",
    # 个人痛苦 (Personal Distress) - 7题
    "在紧急情况下，我感到忧虑和不适。",
    "在情绪紧张的情况下，我有时会感到无助。",
    "在紧急情况下，我会失去控制。",
    "当处于情绪紧张的情况时，我有时会感到麻木。",
    "当看到非常需要紧急帮助的人时，我会崩溃。",
    "当我看到某人受伤时，我倾向于保持冷静。",  # 反向
    "在情绪化的情况下，我往往会慌张。"
]

# ==================== 自我认知类 ====================

# RSES: Rosenberg Self-Esteem Scale (罗森伯格自尊量表) - 完整版10题
RSES_QUESTIONS = [
    "总的来说，我对自己感到满意。",
    "有时候，我觉得自己一无是处。",  # 反向
    "我觉得自己有许多优点。",
    "我能做事和大多数人一样好。",
    "我觉得自己没有太多值得骄傲的地方。",  # 反向
    "有时候我确实觉得自己很没用。",  # 反向
    "我觉得自己是一个有价值的人，至少和其他人一样有价值。",
    "我希望我能更加尊重自己。",  # 反向
    "总的来说，我倾向于认为自己是个失败者。",  # 反向
    "我对自己持积极态度。"
]

# SCS-26: Self-Compassion Scale-26 (自我同情量表) - 完整版26题
SCS26_QUESTIONS = [
    # 自我友善 (Self-Kindness) - 5题
    "当我经历非常困难的时期时，我会给予自己所需的关怀和温柔。",
    "当我感到痛苦时，我试图以爱和善意对待自己。",
    "当事情对我来说变得糟糕时，我对自己很友善。",
    "在痛苦或挣扎的时候，我对自己很友善。",
    "当我真的很挣扎时，我倾向于给自己我需要的温暖。",
    # 自我批判 (Self-Judgment) - 5题 [反向]
    "当我失败时，我会对自己的不足感到不满。",
    "当我注意到自己性格的某些方面我不喜欢时，我会对自己很苛刻。",
    "对自己的缺点和不足，我不太能容忍。",
    "当我看到自己的缺点时，我对自己很苛刻。",
    "当情况对我来说变得困难时，我可能对自己很苛刻。",
    # 普遍人性 (Common Humanity) - 4题
    "当事情对我来说变得糟糕时，我认为困难是每个人生活的一部分。",
    "当我挣扎于某事时，我试图提醒自己世界上有很多其他人也感到同样的方式。",
    "我试图将我的失败视为人类状况的一部分。",
    "当我感到不足时，我试图提醒自己，不完美是人类共同经验的一部分。",
    # 孤立 (Isolation) - 4题 [反向]
    "当我失败时，我倾向于觉得大多数人可能比我做得更好。",
    "当我感到沮丧时，我倾向于觉得大多数其他人可能比我快乐。",
    "当我真的在挣扎时，我倾向于觉得其他人必须有更轻松的时间。",
    "当我失败或感觉不足时，我倾向于感到与世界上其他人分离或切断联系。",
    # 正念 (Mindfulness) - 4题
    "当某些痛苦的事情发生时，我试图以平衡的视角看待情况。",
    "当我失败或感到不足时，我试图保持情绪的平衡。",
    "当我感到沮丧时，我试图以好奇和开放的态度对待我的感受。",
    "当某些痛苦的事情发生时，我试图不让事情失去平衡。",
    # 过度认同 (Over-identification) - 4题 [反向]
    "当我失败或感到不足时，我会被失败感所吞没。",
    "当我情绪低落时，我倾向于沉迷于一切错误。",
    "当某些痛苦的事情发生时，我倾向于夸大其重要性。",
    "当我想到自己的不足时，我倾向于感觉与世界上其他人更加分离和切断联系。"
]

# ==================== 职场与学业类 ====================

# MBI-22: Maslach Burnout Inventory-22 (职业倦怠量表) - 完整版22题
MBI22_QUESTIONS = [
    # 情绪耗竭 (Emotional Exhaustion) - 9题
    "我在工作/学习后感到精疲力竭。",
    "我在早晨醒来面对新的一天工作/学习时感到疲倦。",
    "整天工作/学习让我感到紧张。",
    "我在工作/学习一整天后感到筋疲力尽。",
    "我在工作/学习中感到疲惫。",
    "我感到因为工作/学习而情绪枯竭。",
    "我觉得工作/学习正在让我崩溃。",
    "我觉得工作/学习太辛苦了。",
    "直接与人打交道时，我感到压力很大。",
    # 去人格化/玩世不恭 (Depersonalization/Cynicism) - 5题
    "自从开始这份工作/学习以来，我对工作/学习变得更加冷漠。",
    "我担心这份工作/学习正在让我在情感上变得冷酷。",
    "我真的不在乎我的一些服务对象/同学会怎样。",
    "我觉得我以非人化的方式对待一些服务对象/同学。",
    "我对我的工作/学习失去了热情。",
    # 个人成就感 (Personal Accomplishment) - 8题
    "我能轻松理解我的服务对象/同学的感受。",
    "我非常有效地处理服务对象/同学的问题。",
    "我觉得通过我的工作/学习，我对他人的生活产生了积极影响。",
    "我感到精力充沛。",
    "我能轻松地为服务对象/同学创造轻松的氛围。",
    "与服务对象/同学密切合作后，我感到振奋。",
    "我在工作/学习中完成了许多值得做的事情。",
    "在工作/学习中，我冷静地处理情绪问题。"
]

# ==================== 创伤与应激类 ====================

# PCL-5: PTSD Checklist for DSM-5-20 (创伤后应激障碍检查表) - 完整版20题
PCL5_20_QUESTIONS = [
    # 侵入症状 (Intrusion) - 5题
    "在过去一个月里，您有多频繁地被不想要的创伤性事件记忆所困扰？",
    "在过去一个月里，您有多频繁地做关于创伤性事件的噩梦？",
    "在过去一个月里，您有多频繁地突然感觉或表现得好像创伤性事件又发生了一样（仿佛您正在重新经历它）？",
    "在过去一个月里，当有事情提醒您创伤性事件时，您有多频繁地感到非常心烦意乱？",
    "在过去一个月里，当有事情提醒您创伤性事件时，您有多频繁地出现强烈的生理反应（如心跳加速、呼吸困难、出汗）？",
    # 回避症状 (Avoidance) - 2题
    "在过去一个月里，您有多频繁地避免与创伤性事件有关的记忆、想法或感受？",
    "在过去一个月里，您有多频繁地避免与创伤性事件相关的外部提醒（人、地方、对话、活动、物品或情境）？",
    # 认知和情绪的负性改变 (Negative Alterations in Cognitions and Mood) - 7题
    "在过去一个月里，您有多频繁地无法记住创伤性事件的重要部分？",
    "在过去一个月里，您有多频繁地对自己、他人或世界持有强烈的负面信念（例如：我很糟糕、没有人可以信任、世界是完全危险的）？",
    "在过去一个月里，您有多频繁地对创伤性事件的原因或后果责备自己或他人？",
    "在过去一个月里，您有多频繁地持续感到负面情绪（如恐惧、恐怖、愤怒、内疚或羞耻）？",
    "在过去一个月里，您有多频繁地对参与重要活动失去兴趣？",
    "在过去一个月里，您有多频繁地感到与他人疏远或脱节？",
    "在过去一个月里，您有多频繁地难以感受到积极情绪（例如快乐、满足或爱的感觉）？",
    # 警觉性和反应性的改变 (Alterations in Arousal and Reactivity) - 6题
    "在过去一个月里，您有多频繁地易怒或愤怒爆发（对人或物体发脾气）？",
    "在过去一个月里，您有多频繁地做出鲁莽或自毁行为？",
    "在过去一个月里，您有多频繁地感到过度警觉或警惕？",
    "在过去一个月里，您有多频繁地容易受惊吓？",
    "在过去一个月里，您有多频繁地难以集中注意力？",
    "在过去一个月里，您有多频繁地难以入睡或保持睡眠？"
]

# ==================== 选项定义 ====================

# 4点量表 (PHQ-9, GAD-7 使用)
OPTIONS_4POINT_FREQUENCY = [
    {"text": "完全没有", "score": 0},
    {"text": "有几天", "score": 1},
    {"text": "一半以上天数", "score": 2},
    {"text": "几乎每天", "score": 3}
]

# 5点量表 (PSS-14, PCL-5 使用)
OPTIONS_5POINT_FREQUENCY = [
    {"text": "从不", "score": 0},
    {"text": "几乎从不", "score": 1},
    {"text": "有时", "score": 2},
    {"text": "经常", "score": 3},
    {"text": "总是", "score": 4}
]

# 5点量表 - 程度 (PANAS 使用)
OPTIONS_5POINT_DEGREE = [
    {"text": "完全不", "score": 1},
    {"text": "有一点", "score": 2},
    {"text": "中等程度", "score": 3},
    {"text": "相当多", "score": 4},
    {"text": "非常", "score": 5}
]

# 7点量表 (ECR-36, IRI-28, RSES, SCS-26, MBI-22 使用)
OPTIONS_7POINT_AGREEMENT = [
    {"text": "完全不同意", "score": 1},
    {"text": "不同意", "score": 2},
    {"text": "有点不同意", "score": 3},
    {"text": "中立", "score": 4},
    {"text": "有点同意", "score": 5},
    {"text": "同意", "score": 6},
    {"text": "完全同意", "score": 7}
]

# ==================== 量表配置 ====================

QUESTIONNAIRES = {
    "PHQ9": {
        "title": "PHQ-9 抑郁自评量表",
        "abbr": "PHQ-9",
        "category": "情绪与心境",
        "description": "评估过去两周的抑郁症状严重程度（完整版9题）",
        "time": "3-5分钟",
        "questions": PHQ9_QUESTIONS,
        "options": OPTIONS_4POINT_FREQUENCY,
        "reverse_items": [],
        "scoring_type": "sum",
        "interpretation": {
            "ranges": [
                {"min": 0, "max": 4, "level": "无/极轻微", "color": "green", "advice": "无抑郁症状或极轻微。建议保持良好心态，继续维护心理健康。"},
                {"min": 5, "max": 9, "level": "轻度", "color": "yellow", "advice": "轻度抑郁。建议适当放松，关注自我情绪，考虑通过运动、冥想等方式调节。"},
                {"min": 10, "max": 14, "level": "中度", "color": "orange", "advice": "中度抑郁。建议寻求心理支持，可考虑与平台的专业 AI 心理咨询师深度对话，必要时咨询线下专业人士。"},
                {"min": 15, "max": 19, "level": "中重度", "color": "red", "advice": "中重度抑郁。强烈建议尽快寻求专业心理帮助或精神科医生的评估和治疗。"},
                {"min": 20, "max": 27, "level": "重度", "color": "red", "advice": "重度抑郁。请立即联系专业心理医生或精神科医生，必要时拨打心理危机热线（如 12320）。"}
            ]
        }
    },
    "GAD7": {
        "title": "GAD-7 焦虑自评量表",
        "abbr": "GAD-7",
        "category": "情绪与心境",
        "description": "评估过去两周的焦虑症状严重程度（完整版7题）",
        "time": "2-4分钟",
        "questions": GAD7_QUESTIONS,
        "options": OPTIONS_4POINT_FREQUENCY,
        "reverse_items": [],
        "scoring_type": "sum",
        "interpretation": {
            "ranges": [
                {"min": 0, "max": 4, "level": "无/极轻微", "color": "green", "advice": "无焦虑症状或极轻微。建议保持良好心态。"},
                {"min": 5, "max": 9, "level": "轻度", "color": "yellow", "advice": "轻度焦虑。建议适当放松，关注自我情绪，尝试深呼吸、正念等放松技巧。"},
                {"min": 10, "max": 14, "level": "中度", "color": "orange", "advice": "中度焦虑。建议寻求心理支持，学习焦虑管理技巧，必要时咨询专业人士。"},
                {"min": 15, "max": 21, "level": "重度", "color": "red", "advice": "重度焦虑。建议尽快寻求专业心理帮助或精神科医生的评估。"}
            ]
        }
    },
    "PSS14": {
        "title": "PSS-14 压力知觉量表",
        "abbr": "PSS-14",
        "category": "情绪与心境",
        "description": "评估过去一个月的主观压力水平（完整版14题）",
        "time": "5-7分钟",
        "questions": PSS14_QUESTIONS,
        "options": OPTIONS_5POINT_FREQUENCY,
        "reverse_items": [3, 4, 5, 6, 8, 12],  # 第4,5,6,7,9,13题反向
        "scoring_type": "sum",
        "interpretation": {
            "ranges": [
                {"min": 0, "max": 18, "level": "低压力", "color": "green", "advice": "压力水平较低，您的应对能力良好。建议继续保持健康的生活方式和积极的应对策略。"},
                {"min": 19, "max": 37, "level": "中等压力", "color": "yellow", "advice": "中等压力水平。建议学习压力管理技巧，如时间管理、放松训练、适度运动等。"},
                {"min": 38, "max": 56, "level": "高压力", "color": "red", "advice": "高压力水平。强烈建议寻求专业心理支持，学习有效的压力应对策略，必要时考虑心理咨询。"}
            ]
        }
    },
    "PANAS": {
        "title": "PANAS 积极消极情绪量表",
        "abbr": "PANAS",
        "category": "情绪与心境",
        "description": "评估过去一周的积极和消极情绪状态（完整版20题）",
        "time": "5-7分钟",
        "questions": PANAS_QUESTIONS,
        "options": OPTIONS_5POINT_DEGREE,
        "reverse_items": [],
        "scoring_type": "subscale",
        "subscales": {
            "positive": {"name": "积极情绪", "items": [0, 2, 4, 7, 8, 10, 12, 14, 16, 18]},
            "negative": {"name": "消极情绪", "items": [1, 3, 5, 6, 9, 11, 13, 15, 17, 19]}
        },
        "interpretation": {
            "positive": [
                {"min": 10, "max": 25, "level": "低积极情绪", "color": "yellow", "advice": "积极情绪较低。建议增加愉快活动，培养感恩习惯，与朋友多交流。"},
                {"min": 26, "max": 35, "level": "中等积极情绪", "color": "green", "advice": "积极情绪处于正常范围。继续保持，可以尝试更多带来快乐的活动。"},
                {"min": 36, "max": 50, "level": "高积极情绪", "color": "green", "advice": "积极情绪丰富，这对心理健康非常有益！"}
            ],
            "negative": [
                {"min": 10, "max": 18, "level": "低消极情绪", "color": "green", "advice": "消极情绪较少，心理状态良好。"},
                {"min": 19, "max": 28, "level": "中等消极情绪", "color": "yellow", "advice": "存在一定程度的消极情绪。建议学习情绪调节技巧，如正念、认知重构等。"},
                {"min": 29, "max": 50, "level": "高消极情绪", "color": "red", "advice": "消极情绪较高。建议寻求心理支持，学习有效的情绪管理策略。"}
            ]
        }
    },
    "ECR36": {
        "title": "ECR-36 亲密关系体验量表",
        "abbr": "ECR-36",
        "category": "人际关系",
        "description": "评估亲密关系中的依恋风格（完整版36题：焦虑与回避）",
        "time": "8-12分钟",
        "questions": ECR36_QUESTIONS,
        "options": OPTIONS_7POINT_AGREEMENT,
        "reverse_items": [7, 13, 17, 19, 20, 21, 25, 27, 28, 29, 30, 32, 34, 37],  # 反向题
        "scoring_type": "subscale",
        "subscales": {
            "anxiety": {"name": "关系焦虑", "items": list(range(18))},  # 前18题
            "avoidance": {"name": "关系回避", "items": list(range(18, 36))}  # 后18题
        },
        "interpretation": {
            "anxiety": [
                {"min": 18, "max": 63, "level": "低焦虑", "color": "green", "advice": "在亲密关系中焦虑水平较低，能够安心信任伴侣。"},
                {"min": 64, "max": 90, "level": "中等焦虑", "color": "yellow", "advice": "存在一定的关系焦虑。建议与伴侣坦诚沟通，建立安全感。"},
                {"min": 91, "max": 126, "level": "高焦虑", "color": "red", "advice": "关系焦虑较高，可能过度担心被抛弃。建议寻求关系咨询或个人咨询。"}
            ],
            "avoidance": [
                {"min": 18, "max": 54, "level": "低回避", "color": "green", "advice": "在亲密关系中回避程度低，愿意亲密和依赖。"},
                {"min": 55, "max": 90, "level": "中等回避", "color": "yellow", "advice": "存在一定的关系回避倾向。建议尝试逐步增加亲密度和信任。"},
                {"min": 91, "max": 126, "level": "高回避", "color": "red", "advice": "关系回避程度较高，可能难以建立深度亲密。建议探索亲密恐惧的根源。"}
            ]
        }
    },
    "IRI28": {
        "title": "IRI-28 人际反应指数（共情能力）",
        "abbr": "IRI-28",
        "category": "人际关系",
        "description": "评估共情能力的四个维度（完整版28题）",
        "time": "6-10分钟",
        "questions": IRI28_QUESTIONS,
        "options": OPTIONS_7POINT_AGREEMENT,
        "reverse_items": [1, 5, 11, 18, 19, 25],  # 反向题
        "scoring_type": "subscale",
        "subscales": {
            "perspective": {"name": "观点采择", "items": [0, 1, 2, 3, 4, 5, 6]},
            "fantasy": {"name": "幻想", "items": [7, 8, 9, 10, 11, 12, 13]},
            "empathic": {"name": "共情关注", "items": [14, 15, 16, 17, 18, 19, 20]},
            "distress": {"name": "个人痛苦", "items": [21, 22, 23, 24, 25, 26, 27]}
        },
        "interpretation": {
            "perspective": [
                {"min": 7, "max": 21, "level": "低观点采择", "color": "yellow", "advice": "观点采择能力较低。建议练习从他人角度思考问题。"},
                {"min": 22, "max": 35, "level": "中等观点采择", "color": "green", "advice": "观点采择能力正常。"},
                {"min": 36, "max": 49, "level": "高观点采择", "color": "green", "advice": "观点采择能力强，善于理解他人立场。"}
            ],
            "fantasy": [
                {"min": 7, "max": 21, "level": "低幻想", "color": "green", "advice": "不容易沉浸在虚构故事中，保持现实导向。"},
                {"min": 22, "max": 35, "level": "中等幻想", "color": "green", "advice": "能够适度投入到故事和角色中。"},
                {"min": 36, "max": 49, "level": "高幻想", "color": "yellow", "advice": "容易深度投入虚构世界，注意平衡虚构与现实。"}
            ],
            "empathic": [
                {"min": 7, "max": 21, "level": "低共情关注", "color": "yellow", "advice": "共情关注较低。建议增加对他人感受的关注。"},
                {"min": 22, "max": 35, "level": "中等共情关注", "color": "green", "advice": "共情关注正常，能够关心他人。"},
                {"min": 36, "max": 49, "level": "高共情关注", "color": "green", "advice": "共情关注能力强，富有同情心和关怀。"}
            ],
            "distress": [
                {"min": 7, "max": 21, "level": "低个人痛苦", "color": "green", "advice": "在情绪紧张情况下能保持冷静。"},
                {"min": 22, "max": 35, "level": "中等个人痛苦", "color": "yellow", "advice": "在紧急情况下有一定的焦虑反应。"},
                {"min": 36, "max": 49, "level": "高个人痛苦", "color": "red", "advice": "在他人痛苦面前容易感到压力。建议学习情绪调节技巧。"}
            ]
        }
    },
    "RSES": {
        "title": "RSES 罗森伯格自尊量表",
        "abbr": "RSES",
        "category": "自我认知",
        "description": "评估整体自尊水平（完整版10题）",
        "time": "2-4分钟",
        "questions": RSES_QUESTIONS,
        "options": OPTIONS_7POINT_AGREEMENT,
        "reverse_items": [1, 4, 5, 7, 8],
        "scoring_type": "sum",
        "interpretation": {
            "ranges": [
                {"min": 10, "max": 30, "level": "低自尊", "color": "red", "advice": "自尊水平较低。建议探索自我价值感的来源，寻求心理咨询以提升自尊。"},
                {"min": 31, "max": 50, "level": "中等自尊", "color": "yellow", "advice": "自尊水平处于中等范围。可以通过肯定自己的成就和优点来进一步提升。"},
                {"min": 51, "max": 70, "level": "高自尊", "color": "green", "advice": "自尊水平良好，对自己有积极的评价。"}
            ]
        }
    },
    "SCS26": {
        "title": "SCS-26 自我同情量表",
        "abbr": "SCS-26",
        "category": "自我认知",
        "description": "评估对自己的友善、正念和普遍人性的理解（完整版26题）",
        "time": "6-10分钟",
        "questions": SCS26_QUESTIONS,
        "options": OPTIONS_7POINT_AGREEMENT,
        "reverse_items": [5, 6, 7, 8, 9, 13, 14, 15, 16, 21, 22, 23, 24],  # 反向题
        "scoring_type": "average",
        "interpretation": {
            "ranges": [
                {"min": 1.0, "max": 2.5, "level": "低自我同情", "color": "red", "advice": "自我同情水平较低，对自己可能过于苛刻。建议学习自我关怀技巧，用对待朋友的方式对待自己。"},
                {"min": 2.6, "max": 3.5, "level": "中等自我同情", "color": "yellow", "advice": "自我同情处于中等水平。可以继续练习在困难时对自己更友善。"},
                {"min": 3.6, "max": 5.0, "level": "高自我同情", "color": "green", "advice": "自我同情水平良好，能够在困难时善待自己。"},
                {"min": 5.1, "max": 7.0, "level": "非常高自我同情", "color": "green", "advice": "自我同情能力很强，这对心理健康非常有益。"}
            ]
        }
    },
    "MBI22": {
        "title": "MBI-22 职业倦怠量表",
        "abbr": "MBI-22",
        "category": "职场与学业",
        "description": "评估工作/学习倦怠程度（完整版22题：三维度）",
        "time": "6-10分钟",
        "questions": MBI22_QUESTIONS,
        "options": OPTIONS_7POINT_AGREEMENT,
        "reverse_items": [],  # MBI的个人成就感是正向的，分数越高越好
        "scoring_type": "subscale",
        "subscales": {
            "exhaustion": {"name": "情绪耗竭", "items": [0, 1, 2, 3, 4, 5, 6, 7, 8]},
            "cynicism": {"name": "去人格化", "items": [9, 10, 11, 12, 13]},
            "efficacy": {"name": "个人成就感", "items": [14, 15, 16, 17, 18, 19, 20, 21]}
        },
        "interpretation": {
            "exhaustion": [
                {"min": 9, "max": 27, "level": "低耗竭", "color": "green", "advice": "情绪耗竭程度低，精力充沛。"},
                {"min": 28, "max": 45, "level": "中等耗竭", "color": "yellow", "advice": "存在一定程度的情绪耗竭。建议注意工作-生活平衡，增加休息和放松时间。"},
                {"min": 46, "max": 63, "level": "高耗竭", "color": "red", "advice": "情绪耗竭严重。强烈建议寻求支持，调整工作节奏，必要时考虑职业咨询。"}
            ],
            "cynicism": [
                {"min": 5, "max": 15, "level": "低去人格化", "color": "green", "advice": "对工作保持热情和投入。"},
                {"min": 16, "max": 26, "level": "中等去人格化", "color": "yellow", "advice": "开始对工作感到疏离。建议重新连接工作的意义和价值。"},
                {"min": 27, "max": 35, "level": "高去人格化", "color": "red", "advice": "对工作严重疏离和怀疑。建议寻求职业咨询，探索职业意义。"}
            ],
            "efficacy": [
                {"min": 8, "max": 26, "level": "低成就感", "color": "red", "advice": "个人成就感低。建议关注自己的成就，寻求反馈和认可。"},
                {"min": 27, "max": 40, "level": "中等成就感", "color": "yellow", "advice": "成就感中等。可以设定清晰的目标并庆祝小成就。"},
                {"min": 41, "max": 56, "level": "高成就感", "color": "green", "advice": "成就感良好，对工作有效能感。"}
            ]
        }
    },
    "PCL5_20": {
        "title": "PCL-5 PTSD检查表",
        "abbr": "PCL-5",
        "category": "创伤与应激",
        "description": "评估创伤后应激障碍（PTSD）症状（完整版20题，DSM-5标准）",
        "time": "6-10分钟",
        "questions": PCL5_20_QUESTIONS,
        "options": OPTIONS_5POINT_FREQUENCY,
        "reverse_items": [],
        "scoring_type": "sum",
        "interpretation": {
            "ranges": [
                {"min": 0, "max": 20, "level": "无/极轻微PTSD症状", "color": "green", "advice": "创伤后应激症状极轻微或没有。如果曾经历创伤，说明恢复良好。"},
                {"min": 21, "max": 32, "level": "轻度PTSD症状", "color": "yellow", "advice": "存在轻度创伤后应激症状。建议关注自我照顾，必要时寻求心理支持。"},
                {"min": 33, "max": 50, "level": "中度PTSD症状", "color": "orange", "advice": "中度创伤后应激症状。建议寻求专业创伤治疗（如 EMDR、TF-CBT）。"},
                {"min": 51, "max": 80, "level": "重度PTSD症状", "color": "red", "advice": "重度创伤后应激症状。强烈建议立即寻求专业创伤治疗和精神科评估。PTSD 筛查临界值：31分"}
            ]
        }
    }
}


def get_test_categories():
    """获取所有测评分类"""
    categories = {}
    for key, config in QUESTIONNAIRES.items():
        cat = config["category"]
        if cat not in categories:
            categories[cat] = []
        categories[cat].append({
            "key": key,
            "title": config["title"],
            "abbr": config["abbr"],
            "description": config["description"],
            "time": config["time"]
        })
    return categories

