/* 🎨 Hai 心理健康平台 - 全新全局样式系统 */

/* 导入 Tailwind */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================
   🌐 全局基础样式
   ============================================ */

@layer base {
  /* HTML 和 Body 设置 */
  html {
    @apply scroll-smooth;
    font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
  }

  body {
    @apply bg-gradient-to-br from-gray-50 via-white to-gray-100 text-gray-900 antialiased;
    font-family: 'Inter var', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* 选中文字样式 */
  ::selection {
    @apply bg-primary-500/30 text-primary-900;
  }

  ::-moz-selection {
    @apply bg-primary-500/30 text-primary-900;
  }

  /* 焦点样式 */
  :focus-visible {
    @apply outline-none ring-2 ring-primary-500/50 ring-offset-2;
  }

  /* 标题样式 */
  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-bold tracking-tight;
  }

  h1 {
    @apply text-5xl md:text-6xl lg:text-7xl;
  }

  h2 {
    @apply text-4xl md:text-5xl lg:text-6xl;
  }

  h3 {
    @apply text-3xl md:text-4xl lg:text-5xl;
  }

  h4 {
    @apply text-2xl md:text-3xl lg:text-4xl;
  }

  /* 段落样式 */
  p {
    @apply leading-relaxed;
  }

  /* 链接样式 */
  a {
    @apply text-primary-600 hover:text-primary-700 transition-colors duration-200;
  }

  /* 按钮重置 */
  button {
    @apply transition-all duration-200 ease-out;
  }

  /* 输入框基础样式 */
  input, textarea, select {
    @apply transition-all duration-200;
  }
}

/* ============================================
   🎨 自定义组件样式
   ============================================ */

@layer components {
  /* 容器 */
  .container-custom {
    @apply max-w-7xl mx-auto px-4 sm:px-6 lg:px-8;
  }

  /* 玻璃态卡片 - 多种变体 */
  .glass-card {
    @apply bg-white/10 backdrop-blur-xl border border-white/20 rounded-3xl p-6 shadow-glass;
  }

  .glass-card-strong {
    @apply bg-white/20 backdrop-blur-2xl border border-white/30 rounded-3xl p-6 shadow-glass;
  }

  .glass-card-dark {
    @apply bg-black/20 backdrop-blur-xl border border-white/10 rounded-3xl p-6 shadow-glass;
  }

  /* 按钮 - 现代化设计 */
  .btn {
    @apply inline-flex items-center justify-center px-6 py-3 rounded-xl font-semibold text-sm
           transition-all duration-300 ease-out transform hover:-translate-y-0.5 active:translate-y-0
           focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed
           disabled:transform-none;
  }

  .btn-primary {
    @apply bg-gradient-to-r from-primary-600 to-primary-700 text-white
           hover:from-primary-700 hover:to-primary-800 hover:shadow-xl
           focus:ring-primary-500;
  }

  .btn-secondary {
    @apply bg-gradient-to-r from-secondary-500 to-secondary-600 text-white
           hover:from-secondary-600 hover:to-secondary-700 hover:shadow-xl
           focus:ring-secondary-500;
  }

  .btn-ghost {
    @apply bg-transparent text-gray-700 hover:bg-gray-100 focus:ring-gray-500;
  }

  .btn-glass {
    @apply glass text-white hover:bg-white/20 focus:ring-primary-500;
  }

  /* 输入框 - 现代化设计 */
  .input {
    @apply w-full px-4 py-3 bg-white/80 backdrop-blur-sm border border-gray-200 rounded-xl
           text-gray-900 placeholder-gray-400
           focus:border-primary-500 focus:ring-2 focus:ring-primary-500/20 focus:bg-white
           transition-all duration-200;
  }

  .input-glass {
    @apply w-full px-4 py-3 glass text-white placeholder-white/60
           focus:bg-white/20 focus:ring-2 focus:ring-white/50
           transition-all duration-200;
  }

  /* 徽章 */
  .badge {
    @apply inline-flex items-center px-3 py-1 rounded-full text-xs font-medium;
  }

  .badge-primary {
    @apply bg-primary-100 text-primary-700;
  }

  .badge-success {
    @apply bg-success-100 text-success-700;
  }

  .badge-warning {
    @apply bg-warning-100 text-warning-700;
  }

  .badge-danger {
    @apply bg-danger-100 text-danger-700;
  }

  /* 进度条 */
  .progress-bar {
    @apply relative h-2 bg-gray-200 rounded-full overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-gradient-to-r from-primary-500 to-primary-600 rounded-full transition-all duration-500 ease-out;
  }

  /* 分隔线 */
  .divider {
    @apply relative my-8;
  }

  .divider::before {
    content: '';
    @apply absolute inset-0 h-px bg-gradient-to-r from-transparent via-gray-300 to-transparent;
  }

  /* 卡片悬停效果 */
  .card-hover {
    @apply transition-all duration-300 ease-out hover:-translate-y-2 hover:shadow-2xl;
  }

  /* 文字效果 */
  .text-shimmer {
    @apply bg-gradient-to-r from-primary-600 via-secondary-600 to-primary-600 bg-clip-text text-transparent
           bg-[length:200%_auto] animate-shimmer;
  }

  /* 加载动画 */
  .loader {
    @apply w-8 h-8 border-4 border-gray-200 border-t-primary-600 rounded-full animate-spin;
  }

  /* 骨架屏 */
  .skeleton {
    @apply bg-gray-200 animate-pulse rounded;
  }

  /* 工具提示 */
  .tooltip {
    @apply absolute z-50 px-3 py-2 text-xs font-medium text-white bg-gray-900 rounded-lg shadow-lg
           opacity-0 invisible transition-all duration-200 pointer-events-none;
  }

  /* Ripple 容器 */
  .ripple-container {
    @apply relative overflow-hidden;
  }
}

/* ============================================
   ✨ 高级动画和效果
   ============================================ */

@layer utilities {
  /* 渐变背景动画 */
  .animated-gradient {
    background: linear-gradient(270deg, #667eea, #764ba2, #f093fb, #4facfe);
    background-size: 800% 800%;
    animation: gradient-animation 15s ease infinite;
  }

  @keyframes gradient-animation {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  /* 呼吸灯效果 */
  .breathing {
    animation: breathing 3s ease-in-out infinite;
  }

  @keyframes breathing {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.6; }
  }

  /* 打字光标 */
  .typing-cursor::after {
    content: '|';
    @apply animate-blink ml-1;
  }

  /* 延迟动画类 */
  .delay-100 { animation-delay: 100ms; }
  .delay-200 { animation-delay: 200ms; }
  .delay-300 { animation-delay: 300ms; }
  .delay-400 { animation-delay: 400ms; }
  .delay-500 { animation-delay: 500ms; }
  .delay-600 { animation-delay: 600ms; }
  .delay-700 { animation-delay: 700ms; }
  .delay-800 { animation-delay: 800ms; }
  .delay-900 { animation-delay: 900ms; }
  .delay-1000 { animation-delay: 1000ms; }

  /* 视差效果 */
  .parallax {
    transform: translateZ(-1px) scale(2);
  }

  /* 模糊蒙版 */
  .blur-vignette {
    position: relative;
  }

  .blur-vignette::after {
    content: '';
    position: absolute;
    inset: 0;
    background: radial-gradient(circle, transparent 50%, rgba(0, 0, 0, 0.3) 100%);
    pointer-events: none;
  }

  /* 发光边框 */
  .glow-border {
    position: relative;
    background: linear-gradient(90deg, transparent, rgba(139, 92, 246, 0.3), transparent);
    background-size: 200% 100%;
    animation: shimmer 2s linear infinite;
  }

  /* 波浪效果 */
  .wave-effect {
    position: relative;
    overflow: hidden;
  }

  .wave-effect::before {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 200%;
    height: 100%;
    background: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M321.39,56.44c58-10.79,114.16-30.13,172-41.86,82.39-16.72,168.19-17.73,250.45-.39C823.78,31,906.67,72,985.66,92.83c70.05,18.48,146.53,26.09,214.34,3V0H0V27.35A600.21,600.21,0,0,0,321.39,56.44Z' fill='rgba(139, 92, 246, 0.1)'/%3E%3C/svg%3E");
    background-size: 1200px 120px;
    background-repeat: repeat-x;
    animation: wave 15s linear infinite;
  }

  @keyframes wave {
    0% { transform: translateX(0); }
    100% { transform: translateX(-50%); }
  }

  /* 磨砂玻璃效果增强 */
  .frosted-glass {
    background: rgba(255, 255, 255, 0.05);
    backdrop-filter: blur(20px) saturate(180%);
    -webkit-backdrop-filter: blur(20px) saturate(180%);
    border: 1px solid rgba(255, 255, 255, 0.1);
  }

  /* 新拟态效果 */
  .neumorphic {
    background: #e0e5ec;
    box-shadow: 12px 12px 24px #d1d9e6, -12px -12px 24px #ffffff;
  }

  .neumorphic-inset {
    background: #e0e5ec;
    box-shadow: inset 6px 6px 12px #d1d9e6, inset -6px -6px 12px #ffffff;
  }

  /* 3D 卡片翻转 */
  .flip-card {
    perspective: 1000px;
  }

  .flip-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    text-align: center;
    transition: transform 0.6s;
    transform-style: preserve-3d;
  }

  .flip-card:hover .flip-card-inner {
    transform: rotateY(180deg);
  }

  .flip-card-front, .flip-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
  }

  .flip-card-back {
    transform: rotateY(180deg);
  }

  /* 无限旋转 */
  .infinite-rotate {
    animation: spin 20s linear infinite;
  }

  /* 彩虹边框 */
  .rainbow-border {
    position: relative;
    background: linear-gradient(90deg, #ff0000, #ff7f00, #ffff00, #00ff00, #0000ff, #4b0082, #9400d3);
    background-size: 400% 400%;
    animation: rainbow 6s linear infinite;
    padding: 3px;
    border-radius: inherit;
  }

  @keyframes rainbow {
    0% { background-position: 0% 50%; }
    100% { background-position: 100% 50%; }
  }

  .rainbow-border > * {
    background: white;
    border-radius: inherit;
  }
}

/* ============================================
   📱 响应式工具
   ============================================ */

/* 隐藏/显示工具 */
@media (max-width: 640px) {
  .hide-on-mobile {
    display: none !important;
  }
}

@media (min-width: 641px) {
  .show-on-mobile {
    display: none !important;
  }
}

/* ============================================
   🎯 深色模式支持
   ============================================ */

@media (prefers-color-scheme: dark) {
  body {
    @apply bg-gradient-to-br from-gray-900 via-gray-800 to-gray-900 text-white;
  }

  .glass-card {
    @apply bg-white/5 border-white/10;
  }

  .input {
    @apply bg-gray-800/80 border-gray-700 text-white placeholder-gray-500 focus:bg-gray-800;
  }
}

/* ============================================
   🔧 性能优化
   ============================================ */

/* 硬件加速 */
.will-change-transform {
  will-change: transform;
}

.will-change-opacity {
  will-change: opacity;
}

/* GPU 加速 */
.gpu-accelerated {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* ============================================
   🎨 打印样式
   ============================================ */

@media print {
  body {
    @apply bg-white text-black;
  }

  .no-print {
    display: none !important;
  }

  a {
    text-decoration: underline;
  }
}

